<header class='char-sheet-header'>
    <div class='image-section'>
        <img class='profile' src='{{source.img}}' data-action='editImage' data-edit='img' title='{{source.name}}' />
        <div class='stats-bars'>
            <div class='stat-bar'>
                <div class='labels' data-tooltip='Health'>
                    <p>{{actor.system.stats.hp.value}}/{{actor.system.stats.hp.max}}</p>
                </div>
                <progress
                    class='progress-bar'
                    value='{{actor.system.stats.hp.value}}'
                    max='{{actor.system.stats.hp.max}}'
                ></progress>
                <div class='controls'>
                    <button data-action='HpIncrease'><i class='fa-solid fa-plus'></i></button>
                    <button data-action='HpDecrease'><i class='fa-solid fa-minus'></i></button>
                </div>
            </div>
            <div class='stat-bar'>
                <div class='labels' data-tooltip='Stress'>
                    <p>{{actor.system.stats.stress.value}}/{{actor.system.stats.stress.max}}</p>
                </div>
                <progress
                    class='progress-bar stress-color'
                    value='{{actor.system.stats.stress.value}}'
                    max='{{actor.system.stats.stress.max}}'
                ></progress>
                <div class='controls'>
                    <button data-action='StressIncrease'><i class='fa-solid fa-plus'></i></button>
                    <button data-action='StressDecrease'><i class='fa-solid fa-minus'></i></button>
                </div>
            </div>
        </div>
    </div>
    <div class='main-section'>
        <line-div></line-div>
        <div class='name-row'>
            <h1 class='actor-name'>
                <input
                    type='text'
                    name='name'
                    value='{{source.name}}'
                    placeholder='Actor Name'
                />
            </h1>

                <div class='level-div'>
                    <h3 class='label'>
                        {{localize 'DAGGERHEART.Actor.level'}}
                        {{actor.system.level}}
                    </h3>
                </div>
        </div>
        <div class='heritage-section'>
            {{#unless (filterByType actor.items 'ancestry')}}
                <div class='heritage-item empty'>
                    <h4>{{localize 'TYPES.Item.ancestry'}}</h4>
                </div>
            {{/unless}}
            {{#each (filterByType actor.items 'ancestry') as |ancestry|}}
                <div class='heritage-item' data-item-id='{{ancestry._id}}'>
                    <h4>{{ancestry.name}}</h4>
                    <div class='controls'>
                        <a data-action='editItem' data-item-id='{{ancestry._id}}' data-tooltip='Edit Item'>
                            <i class='fa-solid fa-edit'></i>
                        </a>
                        <a data-action='deleteItem' data-item-id='{{ancestry._id}}' data-tooltip='Delete Item'>
                            <i class='fa-solid fa-trash'></i>
                        </a>
                    </div>
                </div>
            {{/each}}
            {{#unless (filterByType actor.items 'community')}}
                <div class='heritage-item empty'>
                    <h4>{{localize 'TYPES.Item.community'}}</h4>
                </div>
            {{/unless}}
            {{#each (filterByType actor.items 'community') as |community|}}
                <div class='heritage-item' data-item-id='{{community._id}}'>
                    <h4>{{community.name}}</h4>
                    <div class='controls'>
                        <a data-action='editItem' data-item-id='{{community._id}}' data-tooltip='Edit Item'><i
                                class='fa-solid fa-edit'
                            ></i></a>
                        <a data-action='deleteItem' data-item-id='{{community._id}}' data-tooltip='Edit Item'><i
                                class='fa-solid fa-trash'
                            ></i></a>
                    </div>
                </div>
            {{/each}}
            {{#unless (filterByType actor.items 'class')}}
                <div class='heritage-item empty'>
                    <h4>{{localize 'TYPES.Item.class'}}</h4>
                </div>
            {{/unless}}
            {{#each (filterByType actor.items 'class') as |class|}}
                <div class='heritage-item' data-item-id='{{class._id}}'>
                    <h4>{{class.name}}</h4>
                    <div class='controls'>
                        <a data-action='editItem' data-item-id='{{class._id}}' data-tooltip='Edit Item'><i
                                class='fa-solid fa-edit'
                            ></i></a>
                        <a data-action='deleteItem' data-item-id='{{class._id}}' data-tooltip='Edit Item'><i
                                class='fa-solid fa-trash'
                            ></i></a>
                    </div>
                </div>
            {{/each}}
            {{#unless (filterByType actor.items 'subclass')}}
                <div class='heritage-item empty'>
                    <h4>{{localize 'TYPES.Item.subclass'}}</h4>
                </div>
            {{/unless}}
            {{#each (filterByType actor.items 'subclass') as |subclass|}}
                <div class='heritage-item' data-item-id='{{subclass._id}}'>
                    <h4>{{subclass.name}}</h4>
                    <div class='controls'>
                        <a data-action='editItem' data-item-id='{{subclass._id}}' data-tooltip='Edit Item'><i
                                class='fa-solid fa-edit'
                            ></i></a>
                        <a data-action='deleteItem' data-item-id='{{subclass._id}}' data-tooltip='Edit Item'><i
                                class='fa-solid fa-trash'
                            ></i></a>
                    </div>
                </div>
            {{/each}}
        </div>
        <div class='resources-row'>
            <div class='hope-section'>
                <h4>{{localize 'DAGGERHEART.Actor.hope'}}</h4>
                {{#range 1 actor.system.hope.max}}
                    <span class='hope' data-action='hope' data-hope-value='{{num}}'>
                        {{#gt num ../actor.system.hope.value}}
                        <i class='fa-regular fa-circle'></i>
                        {{else}}
                        <i class='fa-solid fa-diamond'></i>
                        {{/gt}}
                    </span>
                {{/range}}
            </div>
            <div class='threshold-section'>
                <h4>{{localize 'DAGGERHEART.Actor.threshold.minor'}}</h4>
                <h4>{{actor.system.damageThreshold.major.value}}</h4>
                <h4>{{localize 'DAGGERHEART.Actor.threshold.major'}}</h4>
                <h4>{{actor.system.damageThreshold.severe.value}}</h4>
                <h4>{{localize 'DAGGERHEART.Actor.threshold.severe'}}</h4>
            </div>
        </div>
        <div class='attributes-section'>
            {{#each actor.system.attributes as |attribute key|}}
                <div
                    class='attribute-div'
                    data-tooltip='
                    {{#each attribute.descriptions as |description|}}{{localize description}}<br>{{/each}}'>
                    <a class='label' data-action='dualityRoll' data-attribute='{{key}}'>
                        <h4>{{localize (concat 'DAGGERHEART.Actor.attributes.' key '.short')}}
                        </h4>
                        <span class='attribute-checked'>
                            {{#if attribute.value}}
                                <i class='fa-solid fa-circle'></i>
                            {{else}}
                                <i class='fa-regular fa-circle'></i>
                            {{/if}}
                        </span>
                        <span class='dice-icon'>
                            <i class='fa-solid fa-dice-d6'></i>
                        </span>
                    </a>
                    <div class='attribute-value'>
                        {{#if (eqg attribute.value 0)}}
                            <p>+{{attribute.value}}</p>
                        {{else}}
                            <p>{{attribute.value}}</p>
                        {{/if}}
                    </div>
                </div>
            {{/each}}
        </div>
        {{> 'systems/daggerheart/templates/items/global/partials/tab-navigation.hbs'}}
    </div>
</header>